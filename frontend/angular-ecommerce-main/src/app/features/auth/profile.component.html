<section class="max-w-2xl mx-auto mt-8 p-6 bg-white border rounded-2xl">
  <div class="flex items-start justify-between gap-4">
    <h1 class="text-2xl font-bold">Thông tin cá nhân</h1>
    <a routerLink="/" class="text-sm text-blue-600 hover:underline">← Về trang chủ</a>
  </div>

  <form class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4" [formGroup]="fm" (ngSubmit)="submit()">
    <div class="md:col-span-2">
      <label class="block text-sm mb-1">Email</label>
      <input type="email" formControlName="email" class="w-full border rounded px-3 py-2 bg-gray-50" readonly />
    </div>

    <div>
      <label class="block text-sm mb-1">Họ tên</label>
      <input type="text" formControlName="fullName" class="w-full border rounded px-3 py-2" />
    </div>
    <div>
      <label class="block text-sm mb-1">Số điện thoại</label>
      <input type="tel" formControlName="phone" class="w-full border rounded px-3 py-2" />
    </div>

    <div class="md:col-span-2">
      <label class="block text-sm mb-1">Địa chỉ 1</label>
      <input type="text" formControlName="addressLine1" class="w-full border rounded px-3 py-2" />
    </div>
    <div class="md:col-span-2">
      <label class="block text-sm mb-1">Địa chỉ 2</label>
      <input type="text" formControlName="addressLine2" class="w-full border rounded px-3 py-2" />
    </div>

    <div>
      <label class="block text-sm mb-1">Phường/Xã</label>
      <input type="text" formControlName="ward" class="w-full border rounded px-3 py-2" />
    </div>
    <div>
      <label class="block text-sm mb-1">Quận/Huyện</label>
      <input type="text" formControlName="district" class="w-full border rounded px-3 py-2" />
    </div>
    <div>
      <label class="block text-sm mb-1">Tỉnh/Thành</label>
      <input type="text" formControlName="city" class="w-full border rounded px-3 py-2" />
    </div>
    <div>
      <label class="block text-sm mb-1">Mã bưu chính</label>
      <input type="text" formControlName="postalCode" class="w-full border rounded px-3 py-2" />
    </div>
    <div class="md:col-span-2">
      <label class="block text-sm mb-1">Quốc gia</label>
      <input type="text" formControlName="country" class="w-full border rounded px-3 py-2" />
    </div>

    <div class="md:col-span-2 mt-2 flex items-center gap-3">
      <button
        class="px-4 py-2 rounded bg-yellow-500 text-white font-medium disabled:opacity-50"
        [disabled]="!canSave"
        type="submit">
        {{ loading ? 'Đang lưu...' : 'Lưu thay đổi' }}
      </button>

      <span *ngIf="saved" class="text-sm text-green-600">Đã lưu xong!</span>
      <span *ngIf="error" class="text-sm text-red-600">{{ error }}</span>
    </div>
  </form>
</section>

<!-- TOAST SLIDE-IN (fixed) -->
<div
  class="fixed top-6 right-6 z-50 transform transition-transform duration-500"
  [class.translate-x-0]="toastOpen()"
  [class.translate-x-full]="!toastOpen()"
  aria-live="polite" aria-atomic="true">

  <div
    class="min-w-[280px] max-w-sm rounded-xl shadow-lg border px-4 py-3 flex items-start gap-3"
    [class.bg-green-50]="toastType() === 'success'"
    [class.border-green-200]="toastType() === 'success'"
    [class.text-green-900]="toastType() === 'success'"
    [class.bg-red-50]="toastType() === 'error'"
    [class.border-red-200]="toastType() === 'error'"
    [class.text-red-900]="toastType() === 'error'">

    <!-- Icon -->
    <div class="pt-0.5">
      <svg *ngIf="toastType() === 'success'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
        <path d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/>
      </svg>
      <svg *ngIf="toastType() === 'error'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 2 1 21h22L12 2zm1 15h-2v-2h2v2zm0-4h-2V8h2v5z"/>
      </svg>
    </div>

    <!-- Message -->
    <div class="text-sm font-medium pr-6">{{ toastMsg() }}</div>

    <!-- Close -->
    <button type="button" class="ml-auto -mr-1 p-1 opacity-60 hover:opacity-100" (click)="closeToast()" aria-label="Đóng">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor">
        <path d="M18.3 5.71 12 12.01l-6.3-6.3-1.4 1.41 6.29 6.29-6.3 6.29 1.41 1.41 6.3-6.29 6.29 6.29 1.41-1.41-6.29-6.29 6.29-6.29z"/>
      </svg>
    </button>
  </div>
</div>
